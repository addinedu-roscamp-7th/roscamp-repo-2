<!-- javis_dmc_bt_nodes.xml -->
<root >
  <TreeNodesModel>
    <!-- 
      ================================================================
      Condition Nodes: "판단 블록"
      ================================================================
    -->

    <!-- 시스템/상태 조건 -->
    <Condition ID="IsEmergencyStopped" />
    <Condition ID="IsCurrentMode">
      <input_port name="modes" type="std::string" default="IDLE,ROAMING" />
    </Condition>
    <Condition ID="IsNewTaskFromRCS" />
    <Condition ID="IsTaskRunning" />

    <!-- 배터리 조건 -->
    <Condition ID="IsBatteryCritical" />
    <Condition ID="IsBatteryWarning" />
    <Condition ID="IsBatterySufficientForNewTask" />
    <Condition ID="ShouldGoToChargerFromRoaming" />
    <Condition ID="IsAtChargerLocation" />

    <!-- 인식/센서 조건 -->
    <Condition ID="IsWakeWordDetected" />
    <Condition ID="IsUserInView" />

    <!-- 
      ================================================================
      Action Nodes: "행동 블록"
      ================================================================
    -->

    <!-- 시스템/상태 관리 액션 -->
    <Action ID="SetRobotMode">
      <input_port name="mode" type="std::string" default="STANDBY" />
    </Action>
    <Action ID="HandleEmergencyStop" />
    <Action ID="AcceptNewTaskFromRCS" />
    <Action ID="ClearCurrentTask">
        <input_port name="success" type="bool" default="true" />
        <input_port name="message" type="std::string" default="Task finished." />
    </Action>
    <Action ID="RunSubTree">
      <input_port name="tree_name" type="std::string" />
    </Action>
    <Action ID="Wait">
        <input_port name="seconds" type="double" default="1.0" />
    </Action>

    <!-- 주행(Drive) 액션 -->
    <Action ID="MoveTo">
      <input_port name="destination_key" type="std::string" default="current_task.destination" />
    </Action>
    <Action ID="ApproachTo">
      <input_port name="target_key" type="std::string" default="current_task.target" />
      <input_port name="distance" type="double" default="0.1" />
    </Action>
    <Action ID="StartPatrol" />
    <Action ID="StopMotion" />

    <!-- 로봇팔(Arm) 액션 -->
    <Action ID="MoveArmToPose">
      <input_port name="pose_name" type="std::string" default="home" />
    </Action>
    <Action ID="PickObject" />
    <Action ID="PlaceObject" />

    <!-- 상호작용(Interaction) 액션 -->
    <Action ID="RunListeningSequence">
      <input_port name="timeout" type="double" default="20.0" />
    </Action>
    <Action ID="WaitForGuiInput">
      <input_port name="timeout" type="double" default="60.0" />
    </Action>
    <Action ID="PlayTTS">
      <input_port name="message" type="std::string" />
    </Action>
    <Action ID="RequestTaskToRCS" />

  </TreeNodesModel>
</root>
